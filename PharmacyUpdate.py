# -*- coding: utf-8 -*-
"""
Created on Fri Mar  8 15:46:53 2019

@author: thomas.dunn
"""

import requests

auth_token = 'eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJoMjNmNWUzLTE2bEd3dmdzOG1fRXRWYWF2anhlNXpqTkZxNUs0ZmF5eVM4In0.eyJqdGkiOiI2OWRhMmIwNS1mNGE4LTQ5ZjktOWIzYS0wYjQzOWUwODJmZTQiLCJleHAiOjE1NTIwODUyODIsIm5iZiI6MCwiaWF0IjoxNTUyMDgxNjgyLCJpc3MiOiJodHRwczovL3B1LmNhcHR1cmVyeC5jb20vYXV0aC9yZWFsbXMvY2FwdHVyZXJ4IiwiYXVkIjoiY3VtdWx1czR1aSIsInN1YiI6ImMwM2I4NTE3LTJjNGUtNGRjZi1hNjk0LWYyZWQ1MTM2NDZlYyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImN1bXVsdXM0dWkiLCJub25jZSI6IjgwNjBhZGVmLWI1ZTAtNGFjYi04MzA3LWZlNWMxYjQ5YTJiNyIsImF1dGhfdGltZSI6MTU1MjA4MTYwMywic2Vzc2lvbl9zdGF0ZSI6IjdiMjRjMGUwLTA5N2QtNGIzMS04ZWI5LWJiZjFlMjM5M2EzMyIsImFjciI6IjAiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cHM6Ly9wdS5jYXB0dXJlcnguY29tIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJjNF9jYW5DcmVhdGVGZWVTZXRzIiwiYzRfaW50ZXJuYWxSZWFkIiwiYzRfY2FuQ3JlYXRlQ29uZGl0aW9uU2V0cyIsImM0X2NhblJlYWRWaXJ0dWFsSW52ZW50b3J5IiwiYzRfY2FuQ3JlYXRlQ292ZXJlZEVudGl0eSIsImM0X2NhbkNyZWF0ZUNvbnRyYWN0cyIsImM0X2NhblJlYWRVc2VycyIsImM0X2NhblJlYWRSZWZlckRvYyIsImM0X2NhblJlYWRTY2hlZHVsZXIiLCJjNF9jYW5SZWFkUmVwbGVuaXNobWVudFJ1bGVTZXQiLCJjNF9jYW5DcmVhdGVPcnBoYW5zIiwiYzRfY2FuUmVhZENsYWltcyIsImM0X2NhbkNyZWF0ZVJlcGxlbmlzaG1lbnQiLCJjNF9jYW5SZWFkUGhhcm1hY3kiLCJjNF9jYW5SZWFkQ2VudHJhbGZpbGwiLCJ1bWFfYXV0aG9yaXphdGlvbiIsImM0X2NhblJlYWRXaG9sZVNhbGVyQWNjb3VudHMiLCJjNF9jYW5DcmVhdGVTY2hlZHVsZXIiLCJjNF9jYW5DcmVhdGVQYXRpZW50RW5jb3VudGVyIiwiYzRfY2FuUmVhZENvdmVyZWRFbnRpdHkiLCJjNF9jYW5SZWFkRHJ1Z0xpc3RzIiwiYzRfY2FuUmVhZFBheW9yQ2xhc3NpZmljYXRpb24iLCJjNF9jYW5DcmVhdGVQaGFybWFjeUNoYWluIiwiYzRfY2FuQ3JlYXRlVXNlcnMiLCJjNF9jYW5SZWFkQ29udHJhY3RzIiwiYzRfY2FuUmVhZEN1bXVsdXM0IiwiYzRfY2FuUmVhZEJpbGxpbmciLCJjNF9jYW5DcmVhdGVWaXJ0dWFsSW52ZW50b3J5IiwiYzRfY2FuQ3JlYXRlUGF5b3JDbGFzc2lmaWNhdGlvbiIsImM0X2NhbkNyZWF0ZUdsb2JhbFBheW9yQ2xhc3NpZmljYXRpb24iLCJjNF9jYW5SZWFkUmVwb3J0cyIsImM0X2NhblJlYWRDaGlsZFNpdGVzIiwiYzRfY2FuUmVhZFByZXNjcmliZXIiLCJjNF9jYW5DcmVhdGVXaG9sZXNhbGVycyIsImM0X2NhblJlYWRGb3JtdWxhcnkiLCJjNF9jYW5DcmVhdGVEcnVnTGlzdHMiLCJjNF9jYW5SZWFkR2xvYmFsUGF5b3JDbGFzc2lmaWNhdGlvbiIsImM0X2ludGVybmFsIiwiYzRfY2FuUmVhZFBoYXJtYWN5Q2hhaW4iLCJjdXN0b21fdXNlcl9hY2Nlc3MiLCJjNF9jYW5DcmVhdGVQaGFybWFjeSIsImM0X2NhbkNyZWF0ZVJlZmVyRG9jIiwiYzRfY2FuUmVhZFBhdGllbnRFbmNvdW50ZXIiLCJjNF9jYW5DcmVhdGVFbGlnaWJpbGl0eVBvbGljeSIsImM0X2NhblJlYWRPcnBoYW5zIiwiYzRfY2FuQ3JlYXRlQ2VudHJhbGZpbGwiLCJjNF9jYW5SZWFkVHJhbnNwb3J0cyIsImM0X2NhblJlYWRDbGFpbXN1YyIsImM0X2NhbkNyZWF0ZUNoaWxkU2l0ZXMiLCJjNF9jYW5DcmVhdGVGb3JtdWxhcnkiLCJjNF9jYW5SZWFkQ29uZGl0aW9uU2V0cyIsImM0X2NhblJlYWRSZXBsZW5pc2htZW50IiwiYzRfY2FuUmVhZEhlYWx0aFN5c3RlbXMiLCJjNF9jYW5DcmVhdGVIZWFsdGhTeXN0ZW1zIiwiYzRfY2FuQ3JlYXRlUmVwbGVuaXNobWVudERldGFpbHMiLCJjNF9jYW5DcmVhdGVXaG9sZVNhbGVyQWNjb3VudHMiLCJjNF9jYW5DcmVhdGVDbGFpbXMiLCJjNF9jYW5SZWFkV2hvbGVzYWxlcnMiLCJjNF9jYW5SZWFkRWxpZ2liaWxpdHlQb2xpY3kiLCJjNF9jYW5DcmVhdGVQcmVzY3JpYmVyIiwidXNlciIsImM0X2NhbkNyZWF0ZVJlcGxlbmlzaG1lbnRSdWxlU2V0IiwiYzRfY2FuUmVhZEZlZVNldHMiXX0sInJlc291cmNlX2FjY2VzcyI6e30sIm5hbWUiOiJUaG9tYXMgRHVubiIsInByZWZlcnJlZF91c2VybmFtZSI6InRob21hcy5kdW5uQGNhcHR1cmVyeC5jb20iLCJnaXZlbl9uYW1lIjoiVGhvbWFzIiwiZmFtaWx5X25hbWUiOiJEdW5uIiwiZW1haWwiOiJ0aG9tYXMuZHVubkBjYXB0dXJlcnguY29tIn0.J1xgRbXAqlAcHSu2HigM5dfTQTOFaEKE-a0u1Hyl7laGzg7mKFlN2qVblaQtMqHfVyHlx7BZMK1h95aNMA8BDLucYo7jtKiGMFh0lzzN1AoDQvhByz85q1yNV7vPN2YqhEP3P7wMsS7tHLVdYAmAf_3oSc2Qcisgn_mG71ZKWC-vZu85JeMb_iDAflmDutJVsk7BbV_TYHS80Szj7wX1tC9UtF0AhzKMd-SKoh5eKubjQTRKiGsB60mr32LCx1X2NHzpMmRlR-ya2PkXMRM19-TJM0h98qnCB80_Aq6u4VVdoGrP_6GJ_5tpvWBKKwnSWcMoKT9B3ng5TmbOCcPSTg'
URL = 'https://pu.capturerx.com/apiservice/cumulus/v1/pharmacies/'
header = {'Authorization': 'Bearer ' + auth_token}

response = requests.get(URL, headers=header)
json = response.json()                          #dictionary
print(json)
Pharmacy = ['2394102a-a0b0-4e07-8a73-747e24029bb1']

update_values = ['nabpNumber' , '99999999999999']
API_body = []

for temp in json:
    if (temp['id'] in Pharmacy): 
        update = temp
        print(temp['name'])
        update[update_values[0]] = update_values[1]
        API_body.append(update)
        
        '''
print(API_body)
'''

for body in API_body:
    print(body)
    response2 = requests.put(URL, json=body, headers=header)  
    print(response2)
    print(response2.json(), '\n')
    c

response3 = requests.get(URL, headers=header)
json3 = response3.json()
for field in json3:
    if (field['id'] in Pharmacy): 
        print(field['nabpNumber'])
